---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import Card from '../../components/Card.astro';

export async function getStaticPaths() {
    const allSets = await getCollection('sets');
    return allSets.map((set: CollectionEntry<'sets'>) => ({
        params: { set: set.id },
        props: { set },
    }));
}

// Access the set data from the props
const { set }: {
    set: CollectionEntry<'sets'>;
} = Astro.props;
---

<Layout title={set.data.name} description={`Details about the ${set.data.name} set`}>
    <div class="container mx-auto py-12 px-4 sm:px-6 lg:px-8">
        <h1 class="text-4xl font-bold text-center mb-8 text-gray-800">{set.data.name}</h1>

        <div class="bg-white p-6 rounded-lg shadow-lg mb-8">
            <p class="text-gray-600"><strong>Series ID:</strong> {set.data.seriesId}</p>
            <p class="text-gray-600"><strong>Set Number:</strong> {set.data.setNumber}</p>
            <p class="text-gray-600"><strong>Release Date:</strong> {set.data.releaseDate}</p>
            <p class="text-gray-600"><strong>Type:</strong> {set.data.type}</p>
        </div>

        <h2 class="text-2xl font-bold mb-4">Cards in {set.data.name}</h2>
        <ul class="space-y-4">
            {set.data.cards.map((card: CollectionEntry<'cards'>) =>  <Card set={set.data.id} name={card.name} number={card.number} />)}
        </ul>
    </div>
</Layout>
